
## 🎮 Rush Hour ルール仕様（実装向け）

### 1. 盤面

* **サイズ**: `boardSize = n`（標準は 6）
* **出口**:

  * 主役車（以降 **red car**）が脱出するための“ゲート”。
  * 通常は **下端中央**
  * 決定的に 1 か所；レベル定義で変更可。
* **座標系**: 左上 (0, 0) が原点、右方向へ `+x`、下方向へ `+y`。

> **不変条件**
>
> * 配置時に盤面外・重複セルがあってはならない。

### 3. 移動ルール

1. **選択された車のみが動く**（同時に二台は動かない）。
2. **歩数**: 1 セル以上 *連続* で空いていれば何セルでも可。
3. **衝突判定**

   * 移動経路上のセルに

     * 他車が存在する
     * 盤面境界を越える
     * （red car 以外の場合）出口セルを跨ぐ
       → その手は不許可。
4. **状態遷移**

   * `applyMove(state, move)` は **新しい `GameState`** を返し不変性を維持。

### 4. 勝利条件

* `red car` の **右端セル** が `x = boardSize - 1` を越えた瞬間に `isCleared = true`。

  * 実装上は「右端セルが出口セルに重なったら勝利」でも可。

### 7. 入出力インタラクション指針

* **ドラッグ**でも**ボタンクリック**でも最終的に `Move` が生成され `GameService` に渡る。
* 不合法手なら視覚的フィードバックのみ（状態更新しない）。
* クリア時は `isCleared` をサブスクライブしてダイアログ等を表示。

